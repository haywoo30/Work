---
title: "STT 180 Day 12 in-class activity part 1"
author: "Vince Melfi"
date: "2/17/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, comment = NA)
```

## Body temperature data

A recent paper, [Decreasing human body temperature in the United States since the Industrial Revolution](https://elifesciences.org/articles/49555), presented evidence that human body temperatures in the United States have been decreasing over the past one hundred or so years. (Many scientists dispute the conclusions of the paper.) One of the data sets in the paper is taken from the NHANES (National Health and Nutrition Examination Study), and is available in the file `NHANES_processed.csv`. There are many variables in the data, but our focus will be on the variable `temp` that provides resting oral body temperatures.

(@) Draw a histogram of the body temperature variable

```{r}
data <- read.csv("NHANES_processed.csv")
hist(data$temp)
```


The *empirical cumulative distribution function* (ecdf) gives the proportion of data values at or below a particular value. In the case of the body temperature data, $\text{ecdf}(98.1)$, for example, gives the proportion of temperatures in the data set below $98.1$ degrees. A few minutes of thought reveals that 

+ $\text{ecdf}(x) = 0$ if $x$ is less than the minimum temperature in the data set;
+ $\text{ecdf}(x) = 1$ if $x$ is greater than or equal to the maximum temperature in the data set;
+ $\text{ecdf}(x)$ is a non-decreasing function of $x$.

(@) Use the `stat_ecdf` function in `ggplot2` to draw an "empirical cumulative distribution function" for the body temperature variable.

```{r}
library(ggplot2)
ggplot(data=data,aes(temp)) + stat_ecdf()
```


Look at the plot of the ecdf to gain more insight into the behavior of the ecdf.

(@) Estimate the 25th, 50th, and 75th percentiles of the temperature data from the ecdf plot. How do these compare with the percentiles computed via the `summary()` function?


```{r}
summary(data$temp)
```



(@) How does the mean temperature compare to the median temperature?

Mean and median are similar because it is a symmetrical normal curve


## Name data

The file `CensusNames.csv` contains data on surnames in the United States, including the name, the rank of the name among all names, and the number of people in the United States with that name. (Some uncommon names are not included in the data.)

(@) Is your surname in the list? If so, what is its rank, and how many people in the United States have that name?

```{r}
surname <- read.csv("CensusNames.csv")
surname$rank[surname$name=="HAYWOOD"]
surname$count[surname$name=="HAYWOOD"]
```


(@) Draw a histogram and an ecdf plot of the variable which counts the number of people with a name. What do you notice from these plots?

```{r}
hist(surname$count)
ggplot(surname,aes(count)) + stat_ecdf()
```


(@) Draw a histogram and an ecdf plot of the base 10 logarithm of the counts. The R function `log10()` computes base 10 logarithms.
```{r}
hist(log10(surname$count))
ggplot(surname,aes(log10(count))) + stat_ecdf()
```


(@) From the ecdf plot of the logarithm of the counts, estimate the 25th, 50th, and 75th percentiles of the counts. Compare these to the computed percentiles from the `summary()` function. Are they similar?

```{r}
summary(log10(surname$count))
```


(@) How does the mean count compare to the median count? How does the mean count compare to the 75th percentile of the counts?




## US cities data

**This section isn't very different from the previous section, so feel free to skip it if time is tight.**

The file `UnitedStatesCities.csv` contains data on cities in the United States, including the name of the city, the population rank of the city among all cities, and the number of people living in the city in 2010. 

(@) What are the population and rank of East Lansing?

(@) Draw a histogram and an ecdf plot of the populations. Do these data seem more like the data on body temperatures or the data on the count of people with a particular name?

(@) Draw a histogram and an ecdf plot of the base-10 logarithm of the populations.

(@) From the ecdf plot of the logarithm of the populations, estimate the 25th, 50th, and 75th percentiles of the populations. Compare these to the computed percentiles from the `summary()` function. Are they similar?

(@) How does the mean population compare to the median population? How does the mean count compare to the 75th percentile of the populations?

